<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@ibm-cloud/cloudant - v0.12.5</title><meta name="description" content="Documentation for @ibm-cloud/cloudant"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@ibm-cloud/cloudant - v0.12.5</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@ibm-cloud/cloudant - v0.12.5</h1></div><div class="tsd-panel tsd-typography"><p><a href="https://github.com/IBM/cloudant-node-sdk/actions/workflows/test.yml"><img src="https://github.com/IBM/cloudant-node-sdk/actions/workflows/test.yml/badge.svg?branch=main&amp;event=push" alt="Build Status"></a>
<a href="https://github.com/IBM/cloudant-node-sdk/releases/latest"><img src="https://img.shields.io/github/v/release/IBM/cloudant-node-sdk?include_prereleases&amp;sort=semver" alt="Release"></a>
<a href="https://ibm.github.io/cloudant-node-sdk/"><img src="https://img.shields.io/static/v1?label=TypeDoc&amp;message=latest&amp;color=blue" alt="Docs"></a></p>
<h1 id="ibm-cloudant-nodejs-sdk-version-0125" class="tsd-anchor-link">IBM Cloudant Node.js SDK Version 0.12.5<a href="#ibm-cloudant-nodejs-sdk-version-0125" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>IBM Cloudant Node.js SDK is a client library that interacts with the
<a href="https://cloud.ibm.com/apidocs/cloudant?code=node">IBM Cloudant APIs</a>.</p>
<p>Disclaimer: This library is still a 0.x release. We do consider this
library production-ready and capable, but there are still some
limitations we’re working to resolve, and refinements we want to
deliver. We are working really hard to minimise the disruption from
now until the 1.0 release, but there may still be some changes that
impact applications using this SDK. For now, be sure to pin versions
to avoid surprises.</p>
<details>
<summary>Table of Contents</summary>
<!-- toc -->
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#using-the-sdk">Using the SDK</a>
<ul>
<li><a href="#authentication">Authentication</a>
<ul>
<li><a href="#authentication-with-environment-variables">Authentication with environment variables</a>
<ul>
<li><a href="#iam-api-key-authentication">IAM API key authentication</a></li>
<li><a href="#iam-trusted-profile-container-authentication">IAM Trusted profile (container) authentication</a></li>
<li><a href="#iam-trusted-profile-vpc-authentication">IAM Trusted profile (VPC) authentication</a></li>
<li><a href="#iam-trusted-profile-assume-identity-authentication">IAM Trusted profile (assume identity) authentication</a></li>
<li><a href="#session-cookie-authentication">Session cookie authentication</a></li>
</ul>
</li>
<li><a href="#authentication-with-external-configuration">Authentication with external configuration</a></li>
<li><a href="#programmatic-authentication">Programmatic authentication</a></li>
</ul>
</li>
<li><a href="#automatic-retries">Automatic retries</a></li>
<li><a href="#request-timeout-configuration">Request timeout configuration</a></li>
<li><a href="#code-examples">Code examples</a>
<ul>
<li><a href="#1-create-a-database-and-add-a-document">1. Create a database and add a document</a></li>
<li><a href="#2-retrieve-information-from-an-existing-database">2. Retrieve information from an existing database</a></li>
<li><a href="#3-update-your-previously-created-document">3. Update your previously created document</a></li>
<li><a href="#4-delete-your-previously-created-document">4. Delete your previously created document</a></li>
<li><a href="#further-code-examples">Further code examples</a></li>
</ul>
</li>
<li><a href="#error-handling">Error handling</a></li>
<li><a href="#raw-io">Raw IO</a></li>
<li><a href="#further-resources">Further resources</a></li>
<li><a href="#browser-usage">Browser usage</a>
<ul>
<li><a href="#polyfills">Polyfills</a></li>
<li><a href="#cors">CORS</a></li>
</ul>
</li>
<li><a href="#changes-feed-follower">Changes feed follower</a>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#modes-of-operation">Modes of operation</a></li>
<li><a href="#configuring-the-changes-follower">Configuring the changes follower</a></li>
<li><a href="#error-suppression">Error suppression</a></li>
<li><a href="#follower-operation">Follower operation</a></li>
<li><a href="#checkpoints">Checkpoints</a></li>
<li><a href="#code-examples-1">Code examples</a>
<ul>
<li><a href="#initializing-a-changes-follower">Initializing a changes follower</a></li>
<li><a href="#starting-the-changes-follower">Starting the changes follower</a>
<ul>
<li><a href="#start-mode-for-continuous-listening">Start mode for continuous listening</a></li>
<li><a href="#start-mode-for-one-off-fetching">Start mode for one-off fetching</a></li>
</ul>
</li>
<li><a href="#processing-changes">Processing changes</a>
<ul>
<li><a href="#process-continuous-changes">Process continuous changes</a></li>
<li><a href="#process-one-off-changes">Process one-off changes</a></li>
</ul>
</li>
<li><a href="#stopping-the-changes-follower">Stopping the changes follower</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#pagination-beta">Pagination (beta)</a>
<ul>
<li><a href="#introduction-1">Introduction</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#capacity-considerations">Capacity considerations</a></li>
<li><a href="#available-operations">Available operations</a></li>
<li><a href="#creating-a-pagination">Creating a pagination</a>
<ul>
<li><a href="#initialize-the-service">Initialize the service</a></li>
<li><a href="#set-the-options">Set the options</a></li>
<li><a href="#create-the-pagination">Create the pagination</a></li>
</ul>
</li>
<li><a href="#using-pagination">Using pagination</a>
<ul>
<li><a href="#stream-pages">Stream pages</a></li>
<li><a href="#stream-rows">Stream rows</a></li>
<li><a href="#iterate-pages">Iterate pages</a></li>
<li><a href="#iterate-rows">Iterate rows</a></li>
<li><a href="#pager">Pager</a>
<ul>
<li><a href="#get-each-page-from-a-pager">Get each page from a pager</a></li>
<li><a href="#get-all-results-from-a-pager">Get all results from a pager</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#questions">Questions</a></li>
<li><a href="#issues">Issues</a></li>
<li><a href="#versioning-and-lts-support">Versioning and LTS support</a></li>
<li><a href="#open-source-at-ibm">Open source at IBM</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
</details>
<h2 id="overview" class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The IBM Cloudant Node.js SDK allows developers to programmatically
interact with <a href="https://cloud.ibm.com/apidocs/cloudant">IBM Cloudant</a>
with the help of the <code>@ibm-cloud/cloudant</code> package.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The purpose of this Node.js SDK is to wrap most of the HTTP request APIs
provided by Cloudant and supply other functions to ease the usage of Cloudant.
This SDK should make life easier for programmers to do what’s really important
to them: developing software.</p>
<p>Reasons why you should consider using Cloudant Node.js SDK in your
project:</p>
<ul>
<li>Supported by IBM Cloudant.</li>
<li>Server compatibility with:
<ul>
<li>IBM Cloudant.</li>
<li><a href="https://docs.couchdb.org/en/stable/">Apache CouchDB 3.x</a> for data operations.</li>
</ul>
</li>
<li>Includes all the most popular and latest supported endpoints for
applications.</li>
<li>Handles the authentication.</li>
<li>Familiar user experience with IBM Cloud SDKs.</li>
<li>Flexibility to use either built-in models or byte-based requests and responses for documents.</li>
<li>Built-in <a href="#changes-feed-follower">Changes feed follower</a></li>
<li>Built-in <a href="#pagination-beta">Pagination</a> (beta)</li>
<li><code>Promise</code> based design with asynchronous HTTP requests.</li>
<li>Use either as native JavaScript or take advantage of TypeScript models.</li>
<li>Transparently compresses request and response bodies.</li>
</ul>
<h2 id="prerequisites" class="tsd-anchor-link">Prerequisites<a href="#prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>A
<a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-getting-started-with-cloudant">Cloudant</a>
service instance or a
<a href="https://docs.couchdb.org/en/latest/install/index.html">CouchDB</a>
server.</li>
<li>Node.js 20 or 22.</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@ibm-cloud/cloudant</span>
</code><button type="button">Copy</button></pre>

<h2 id="using-the-sdk" class="tsd-anchor-link">Using the SDK<a href="#using-the-sdk" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For fundamental SDK usage information and config options, please see the common <a href="https://github.com/IBM/ibm-cloud-sdk-common/blob/main/README.md">IBM Cloud SDK</a> documentation.</p>
<p>This library requires configuration with a service URL and
<a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-locating-your-service-credentials">Cloudant service credentials</a> to authenticate with your
account.</p>
<p>There are several ways to <strong>set</strong> these authentication properties:</p>
<ol>
<li>As <a href="#authentication-with-environment-variables">environment variables</a></li>
<li>The <a href="#programmatic-authentication">programmatic approach</a></li>
<li>With an <a href="#authentication-with-external-configuration">external credentials file</a></li>
</ol>
<p>The following section describes the different authentication types and provides environment variable examples.
Examples for other configuration methods are available by following the provided links.</p>
<h3 id="authentication" class="tsd-anchor-link">Authentication<a href="#authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This library requires credentials to authenticate with IBM Cloudant. These credentials may be:</p>
<ul>
<li>IBM Cloud IAM credentials (with authentication types <code>CONTAINER</code>, <code>VPC</code>, <code>IAMASSUME</code> and <code>IAM</code>)
<ul>
<li><a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-managing-access-for-cloudant#introduction-iam-ai">IBM Cloud account</a> user, service ID or trusted profile credentials
that have access granted to the IBM Cloud Cloudant resource instance.</li>
<li><a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-locating-your-service-credentials">IBM Cloudant service credentials</a> generated by the IBM Cloud Cloudant resource instance.</li>
</ul>
</li>
<li>Username and password credentials (with authentication types <code>COUCHDB_SESSION</code> and <code>BASIC</code>)
<ul>
<li><a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-locating-your-service-credentials">IBM Cloudant service credentials</a> generated for an IBM Cloud Cloudant resource instance not configured as <code>IAM only</code>.</li>
<li>IBM Cloudant <a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-work-with-your-account#basic-authentication">legacy credentials</a> (username and password) for instances not in IBM Cloud.</li>
<li>IBM Cloudant <a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-work-with-your-account#api-keys">legacy API keys</a>.</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Authentication type</th>
<th>Recommended for</th>
<th><code>AUTH_TYPE</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>IAM Trusted Profiles (compute resource <a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#container-authentication">container</a>)</td>
<td>Cloudant<BR>(SDK running in IBM Cloud IKS)</td>
<td><code>CONTAINER</code></td>
<td>Obtains a compute resource (CR) token from the container.<BR>Exchanges the CR token for an IAM <code>access_token</code>.<BR>Adds an <code>Authorization: Bearer &lt;access_token&gt;</code> header to each HTTP request.<BR>Automatically renews the access token when needed.</td>
</tr>
<tr>
<td>IAM Trusted Profiles (compute resource <a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#vpc-instance-authentication">VPC</a>)</td>
<td>Cloudant<BR>(SDK running in IBM Cloud VPC)</td>
<td><code>VPC</code></td>
<td>Obtains an identity token from the VPC instance metadata.<BR>Exchanges the identity token for an IAM <code>access_token</code>.<BR>Adds an <code>Authorization: Bearer &lt;access_token&gt;</code> header to each HTTP request.<BR>Automatically renews the access token when needed.</td>
</tr>
<tr>
<td>IAM Trusted Profiles (<a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#identity-and-access-management-iam-authentication-grant-type-assume">assume identity</a>)</td>
<td>Cloudant</td>
<td><code>IAMASSUME</code></td>
<td>Exchanges an IAM API key for an IAM <code>access_token</code> (same as <code>IAM</code> auth type).<BR>Uses that initial token to obtain a second <code>access_token</code> from IAM with the assumed identity information.<BR>Adds an <code>Authorization: Bearer &lt;access_token&gt;</code> header to each HTTP request.<BR>Automatically renews the access token when needed.</td>
</tr>
<tr>
<td><a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#identity-and-access-management-iam-authentication-grant-type-apikey">IAM API key</a></td>
<td>Cloudant</td>
<td><code>IAM</code></td>
<td>Exchanges an IAM API key for an IAM <code>access_token</code>.<BR>Adds an <code>Authorization: Bearer &lt;access_token&gt;</code> header to each HTTP request.<BR>Automatically renews the access token when needed.</td>
</tr>
<tr>
<td><a href="#session-cookie-authentication">Session cookie</a></td>
<td><a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-work-with-your-account#cookie-authentication">Cloudant</a><BR>(legacy credentials &amp; instances without IAM)<BR><BR><a href="https://docs.couchdb.org/en/stable/api/server/authn.html#cookie-authentication">Apache CouchDB</a></td>
<td><code>COUCHDB_SESSION</code></td>
<td>Exchanges credentials with <code>/_session</code> endpoint to retrieve a cookie.<BR>Adds <code>Cookie</code> header and content to each HTTP request.<BR>Automatically renews session when needed.</td>
</tr>
<tr>
<td><a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#bearer-token-authentication">Bearer token</a></td>
<td><a href="https://docs.couchdb.org/en/stable/api/server/authn.html#jwt-authentication">Apache CouchDB</a><BR>(using JWT authentication)</td>
<td><code>BEARERTOKEN</code></td>
<td>Adds an <code>Authorization: Bearer &lt;token&gt;</code> to each HTTP request.<BR>No token management or renewal.<BR>Also compatible with IAM access tokens managed independently of the SDK.</td>
</tr>
<tr>
<td><a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#basic-authentication">Basic</a></td>
<td><a href="https://docs.couchdb.org/en/stable/api/server/authn.html#basic-authentication">Apache CouchDB</a><BR>(if cookies are not enabled)</td>
<td><code>BASIC</code></td>
<td>Adds an <code>Authorization: Basic &lt;encoded username and password&gt;</code> header to each HTTP request.</td>
</tr>
<tr>
<td><a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md#no-auth-authentication">None</a></td>
<td>-</td>
<td><code>NOAUTH</code></td>
<td>Note that this authentication type only works for operations against a database allowing access for unauthenticated users.</td>
</tr>
</tbody>
</table>
<p>The default authentication type for the SDK is <code>CONTAINER</code> unless supplying <code>APIKEY</code> configuration, which changes the default authentication type to <code>IAM</code>.</p>
<h4 id="authentication-with-environment-variables" class="tsd-anchor-link">Authentication with environment variables<a href="#authentication-with-environment-variables" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The default service name is <code>CLOUDANT</code> so these examples use <code>CLOUDANT_</code> prefixed names.</p>
<p>Any custom service name prefix is valid, provided it matches the name used to instantiate the SDK client
and applied to all configuration options.</p>
<h5 id="iam-api-key-authentication" class="tsd-anchor-link">IAM API key authentication<a href="#iam-api-key-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>For Cloudant <em>IAM API key authentication</em>, set the following environmental variables by
replacing the <code>&lt;url&gt;</code> and <code>&lt;apikey&gt;</code> with your proper
<a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-locating-your-service-credentials">service credentials</a>. There is no need to set
<code>CLOUDANT_AUTH_TYPE</code> to <code>IAM</code> because it is the default when supplying an <code>APIKEY</code>.</p>
<pre><code class="bash"><span class="hl-3">CLOUDANT_URL</span><span class="hl-1">=&lt;</span><span class="hl-2">url</span><span class="hl-1">&gt;</span><br/><span class="hl-3">CLOUDANT_APIKEY</span><span class="hl-1">=&lt;</span><span class="hl-2">apikey</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<h5 id="iam-trusted-profile-container-authentication" class="tsd-anchor-link">IAM Trusted profile (container) authentication<a href="#iam-trusted-profile-container-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>For Cloudant <em>IAM Trusted profile compute resource container authentication</em>, set the following environmental variables by
replacing the <code>&lt;url&gt;</code> and <code>&lt;id&gt;</code> with your values. There is no need to set
<code>CLOUDANT_AUTH_TYPE</code> to <code>CONTAINER</code> because it is the default.</p>
<pre><code class="bash"><span class="hl-3">CLOUDANT_URL</span><span class="hl-1">=&lt;</span><span class="hl-2">url</span><span class="hl-1">&gt;</span><br/><span class="hl-3">CLOUDANT_IAM_PROFILE_ID</span><span class="hl-1">=&lt;</span><span class="hl-2">id</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Alternatives to <code>CLOUDANT_IAM_PROFILE_ID</code>:</p>
<ul>
<li><code>CLOUDANT_IAM_PROFILE_NAME</code></li>
</ul>
<h5 id="iam-trusted-profile-vpc-authentication" class="tsd-anchor-link">IAM Trusted profile (VPC) authentication<a href="#iam-trusted-profile-vpc-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>For Cloudant <em>IAM Trusted profile compute resource vpc authentication</em>, set the following environmental variables by
replacing the <code>&lt;url&gt;</code> and <code>&lt;id&gt;</code> with your values.</p>
<pre><code class="bash"><span class="hl-3">CLOUDANT_AUTH_TYPE</span><span class="hl-1">=</span><span class="hl-2">VPC</span><br/><span class="hl-3">CLOUDANT_URL</span><span class="hl-1">=&lt;</span><span class="hl-2">url</span><span class="hl-1">&gt;</span><br/><span class="hl-3">CLOUDANT_IAM_PROFILE_ID</span><span class="hl-1">=&lt;</span><span class="hl-2">id</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Alternatives to <code>CLOUDANT_IAM_PROFILE_ID</code>:</p>
<ul>
<li><code>CLOUDANT_IAM_PROFILE_CRN</code></li>
<li>No profile information (uses the default trusted profile linked to the compute resource)</li>
</ul>
<h5 id="iam-trusted-profile-assume-identity-authentication" class="tsd-anchor-link">IAM Trusted profile (assume identity) authentication<a href="#iam-trusted-profile-assume-identity-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>For Cloudant <em>IAM Trusted profile assume authentication</em>, set the following environmental variables by
replacing the <code>&lt;url&gt;</code> and <code>&lt;id&gt;</code> with your values.</p>
<pre><code class="bash"><span class="hl-3">CLOUDANT_AUTH_TYPE</span><span class="hl-1">=</span><span class="hl-2">IAMASSUME</span><br/><span class="hl-3">CLOUDANT_URL</span><span class="hl-1">=&lt;</span><span class="hl-2">url</span><span class="hl-1">&gt;</span><br/><span class="hl-3">CLOUDANT_IAM_PROFILE_ID</span><span class="hl-1">=&lt;</span><span class="hl-2">id</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Alternatives to <code>CLOUDANT_IAM_PROFILE_ID</code>:</p>
<ul>
<li><code>CLOUDANT_IAM_PROFILE_CRN</code></li>
<li><code>CLOUDANT_IAM_PROFILE_NAME</code> <em>and</em> <code>CLOUDANT_IAM_ACCOUNT_ID</code> (ID of the account that contains the named trusted profile)</li>
</ul>
<h5 id="session-cookie-authentication" class="tsd-anchor-link">Session cookie authentication<a href="#session-cookie-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>For <code>COUCHDB_SESSION</code> authentication, set the following environmental variables
by replacing the <code>&lt;url&gt;</code>, <code>&lt;username&gt;</code> and <code>&lt;password&gt;</code> with your proper
<a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-locating-your-service-credentials">service credentials</a>.</p>
<pre><code class="bash"><span class="hl-3">CLOUDANT_AUTH_TYPE</span><span class="hl-1">=</span><span class="hl-2">COUCHDB_SESSION</span><br/><span class="hl-3">CLOUDANT_URL</span><span class="hl-1">=&lt;</span><span class="hl-2">url</span><span class="hl-1">&gt;</span><br/><span class="hl-3">CLOUDANT_USERNAME</span><span class="hl-1">=&lt;</span><span class="hl-2">username</span><span class="hl-1">&gt;</span><br/><span class="hl-3">CLOUDANT_PASSWORD</span><span class="hl-1">=&lt;</span><span class="hl-2">password</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<h4 id="authentication-with-external-configuration" class="tsd-anchor-link">Authentication with external configuration<a href="#authentication-with-external-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For more information about using an external configuration file, see the related documentation in
<a href="https://cloud.ibm.com/apidocs/cloudant?code=node#authentication-with-external-configuration">Cloudant API docs</a>,
or the
<a href="https://github.com/IBM/ibm-cloud-sdk-common#using-external-configuration">general SDK usage information</a>.</p>
<h4 id="programmatic-authentication" class="tsd-anchor-link">Programmatic authentication<a href="#programmatic-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>To learn more about how to use programmatic authentication, see the related
documentation in the
<a href="https://cloud.ibm.com/apidocs/cloudant?code=node#programmatic-authentication">Cloudant API docs</a>
or in the
<a href="https://github.com/IBM/node-sdk-core/blob/main/Authentication.md">Node.js SDK Core document</a> about authentication.</p>
<h3 id="automatic-retries" class="tsd-anchor-link">Automatic retries<a href="#automatic-retries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The SDK supports a generalized retry feature that can automatically retry on common errors.</p>
<p>The <a href="https://github.com/IBM/ibm-cloud-sdk-common#automatic-retries">automatic retries</a> section has details on how to enable the retries with default values and customize the retries programmatically or with external configuration.</p>
<h3 id="request-timeout-configuration" class="tsd-anchor-link">Request timeout configuration<a href="#request-timeout-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>No request timeout is defined, but a 2.5m connect and 2.5m read timeout is set by default. Be sure to set a request timeout appropriate to your application usage and environment.
The <a href="https://github.com/IBM/ibm-cloud-sdk-common#configuring-request-timeouts">request timeout</a> section contains details on how to change the value.</p>
<p><strong>Note:</strong> System settings may take precedence over configured timeout values.</p>
<h3 id="code-examples" class="tsd-anchor-link">Code examples<a href="#code-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The following code examples
<a href="#authentication-with-environment-variables">authenticate with the environment variables</a>.</p>
<h4 id="1-create-a-database-and-add-a-document" class="tsd-anchor-link">1. Create a database and add a document<a href="#1-create-a-database-and-add-a-document" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><strong>Note:</strong> This example code assumes that <code>orders</code> database does not exist in your account.</p>
<p>This example code creates <code>orders</code> database and adds a new document &quot;example&quot;
into it. To connect, you must set your environment variables with
the <em>service url</em>, <em>authentication type</em> and <em>authentication credentials</em>
of your Cloudant service.</p>
<p>Cloudant environment variable naming starts with a <em>service name</em> prefix that identifies your service.
By default, this is <code>CLOUDANT</code>, see the settings in the
<a href="#authentication-with-environment-variables">authentication with environment variables section</a>.</p>
<p>If you would like to rename your Cloudant service from <code>CLOUDANT</code>,
you must use your defined service name as the prefix for all Cloudant related environment variables.</p>
<p>Once the environment variables are set, you can try out the code examples.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-6">OrderDocument</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">Document</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">name</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">joined</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">_id</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">_rev</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name ======================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><br/><span class="hl-7">// 2. Create a database =========================================================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// Try to create database if it doesn&#39;t exist</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">createDb</span><span class="hl-1"> = </span><span class="hl-3">client</span><br/><span class="hl-1">  .</span><span class="hl-0">putDatabase</span><span class="hl-1">({ </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">putDatabaseResult</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">putDatabaseResult</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">ok</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`&quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database created.&quot;`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">code</span><span class="hl-1"> === </span><span class="hl-9">412</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`Cannot create &quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database, it already exists.`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-7">// 3. Create a document =========================================================</span><br/><span class="hl-7">// Create a document object with &quot;example&quot; id</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDocId</span><span class="hl-1"> = </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// Setting `_id` for the document is optional when postDocument function is used for CREATE.</span><br/><span class="hl-7">// When `_id` is not provided the server will generate one for your document.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDocument</span><span class="hl-1">: </span><span class="hl-6">OrderDocument</span><span class="hl-1"> = { </span><span class="hl-3">_id:</span><span class="hl-1"> </span><span class="hl-3">exampleDocId</span><span class="hl-1"> };</span><br/><br/><span class="hl-7">// Add &quot;name&quot; and &quot;joined&quot; fields to the document</span><br/><span class="hl-3">exampleDocument</span><span class="hl-1">.</span><span class="hl-3">name</span><span class="hl-1"> = </span><span class="hl-2">&#39;Bob Smith&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">exampleDocument</span><span class="hl-1">.</span><span class="hl-3">joined</span><span class="hl-1"> = </span><span class="hl-2">&#39;2019-01-24T10:42:59.000Z&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// Save the document in the database with &quot;postDocument&quot; function</span><br/><span class="hl-3">createDb</span><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">client</span><br/><span class="hl-1">    .</span><span class="hl-0">postDocument</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">document:</span><span class="hl-1"> </span><span class="hl-3">exampleDocument</span><span class="hl-1">,</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><span class="hl-1">    </span><span class="hl-7">// Note: saving the document can also be done with the &quot;putDocument&quot;</span><br/><span class="hl-1">    </span><span class="hl-7">// function. In this case `docId` is required for a CREATE operation:</span><br/><span class="hl-1">    </span><span class="hl-7">/*</span><br/><span class="hl-7">    .putDocument({</span><br/><span class="hl-7">      db: exampleDbName,</span><br/><span class="hl-7">      docId: exampleDocId,</span><br/><span class="hl-7">      document: exampleDocument,</span><br/><span class="hl-7">    })</span><br/><span class="hl-7">    */</span><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">createDocumentResponse</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">// Keeping track of the revision number of the document object</span><br/><span class="hl-1">      </span><span class="hl-7">// is necessary for further UPDATE/DELETE operations:</span><br/><span class="hl-1">      </span><span class="hl-3">exampleDocument</span><span class="hl-1">.</span><span class="hl-3">_rev</span><span class="hl-1"> = </span><span class="hl-3">createDocumentResponse</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">&#39;You have created the document:</span><span class="hl-10">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">          </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-3">exampleDocument</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, </span><span class="hl-9">2</span><span class="hl-1">)</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">createDbAndDoc</span><span class="hl-1"> = </span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name ====================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 2. Create a database =======================================================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Try to create database if it doesn&#39;t exist</span><br/><span class="hl-1">  </span><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">putDatabaseResult</span><span class="hl-1"> = (</span><br/><span class="hl-1">      </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">putDatabase</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    ).</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">putDatabaseResult</span><span class="hl-1">.</span><span class="hl-3">ok</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`&quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database created.`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  } </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">code</span><span class="hl-1"> === </span><span class="hl-9">412</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`Cannot create &quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database, it already exists.`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 3. Create a document =======================================================</span><br/><span class="hl-1">  </span><span class="hl-7">// Create a document object with &quot;example&quot; id</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDocId</span><span class="hl-1"> = </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Setting `_id` for the document is optional when &quot;postDocument&quot; function is used for CREATE.</span><br/><span class="hl-1">  </span><span class="hl-7">// When `_id` is not provided the server will generate one for your document.</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDocument</span><span class="hl-1"> = { </span><span class="hl-3">_id:</span><span class="hl-1"> </span><span class="hl-3">exampleDocId</span><span class="hl-1"> };</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Add &quot;name&quot; and &quot;joined&quot; fields to the document</span><br/><span class="hl-1">  </span><span class="hl-3">exampleDocument</span><span class="hl-1">[</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">] = </span><span class="hl-2">&#39;Bob Smith&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">exampleDocument</span><span class="hl-1">.</span><span class="hl-3">joined</span><span class="hl-1"> = </span><span class="hl-2">&#39;2019-01-24T10:42:59.000Z&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Save the document in the database with &quot;postDocument&quot; function</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">createDocumentResponse</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">postDocument</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">document:</span><span class="hl-1"> </span><span class="hl-3">exampleDocument</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// ==========================================================================</span><br/><span class="hl-1">  </span><span class="hl-7">// Note: saving the document can also be done with the &quot;putDocument&quot;</span><br/><span class="hl-1">  </span><span class="hl-7">// function. In this case `docId` is required for a CREATE operation:</span><br/><span class="hl-1">  </span><span class="hl-7">/* const createDocumentResponse = await client.putDocument({</span><br/><span class="hl-7">       db: exampleDbName,</span><br/><span class="hl-7">       docId: exampleDocId,</span><br/><span class="hl-7">       document: exampleDocument,</span><br/><span class="hl-7">  }); */</span><br/><span class="hl-1">  </span><span class="hl-7">// ==========================================================================</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Keeping track of the revision number of the document object</span><br/><span class="hl-1">  </span><span class="hl-7">// is necessary for further UPDATE/DELETE operations:</span><br/><span class="hl-1">  </span><span class="hl-3">exampleDocument</span><span class="hl-1">.</span><span class="hl-3">_rev</span><span class="hl-1"> = </span><span class="hl-3">createDocumentResponse</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;You have created the document:</span><span class="hl-10">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">      </span><span class="hl-8">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-3">exampleDocument</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, </span><span class="hl-9">2</span><span class="hl-1">)</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">require</span><span class="hl-1">.</span><span class="hl-3">main</span><span class="hl-1"> === </span><span class="hl-6">module</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">createDbAndDoc</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
<p>When you run the code, you see a result similar to the following output.</p>
<pre><code class="text">&quot;orders&quot; database created.
You have created the document:
{
  &quot;_id&quot;: &quot;example&quot;,
  &quot;name&quot;: &quot;Bob Smith&quot;,
  &quot;joined&quot;: &quot;2019-01-24T10:42:59.000Z&quot;,
  &quot;_rev&quot;: &quot;1-1b403633540686aa32d013fda9041a5d&quot;
}
</code><button type="button">Copy</button></pre>

<h4 id="2-retrieve-information-from-an-existing-database" class="tsd-anchor-link">2. Retrieve information from an existing database<a href="#2-retrieve-information-from-an-existing-database" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><strong>Note</strong>: This example code assumes that you have created both the <code>orders</code>
database and the <code>example</code> document by
<a href="#1-create-a-database-and-add-a-document">running the previous example code</a>
successfully. Otherwise, the following error message occurs, &quot;Cannot delete document because either 'orders'
database or 'example' document was not found.&quot;</p>
<details>
<summary>Gather database information example</summary>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name =====================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><br/><span class="hl-7">// 2. Get server information ====================================================</span><br/><span class="hl-7">// call service without parameters:</span><br/><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getServerInformation</span><span class="hl-1">().</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">serverInformation</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-8">version</span><span class="hl-1"> } = </span><span class="hl-3">serverInformation</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Server version </span><span class="hl-5">${</span><span class="hl-3">version</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// 3. Get database information for &quot;orders&quot; ===================================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">dbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// call service with embedded parameters:</span><br/><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getDatabaseInformation</span><span class="hl-1">({ </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">dbName</span><span class="hl-1"> }).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">dbInfo</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">documentCount</span><span class="hl-1"> = </span><span class="hl-3">dbInfo</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">docCount</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">dbNameResult</span><span class="hl-1"> = </span><span class="hl-3">dbInfo</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">dbName</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 4. Show document count in database =========================================</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">`Document count in &quot;</span><span class="hl-5">${</span><span class="hl-3">dbNameResult</span><span class="hl-5">}</span><span class="hl-2">&quot; database is </span><span class="hl-5">${</span><span class="hl-3">documentCount</span><span class="hl-5">}</span><span class="hl-2">.`</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// 5. Get &quot;example&quot; document out of the database by document id =====================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">getDocParams</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">GetDocumentParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">dbName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-7">// call service with predefined parameters:</span><br/><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getDocument</span><span class="hl-1">(</span><span class="hl-3">getDocParams</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">documentExample</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// result object is defined as a Document here:</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-8">result</span><span class="hl-1"> } = </span><span class="hl-3">documentExample</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">`Document retrieved from database:</span><span class="hl-10">\n</span><span class="hl-5">${</span><span class="hl-8">JSON</span><span class="hl-11">.</span><span class="hl-0">stringify</span><span class="hl-11">(</span><span class="hl-3">result</span><span class="hl-11">, </span><span class="hl-5">null</span><span class="hl-11">, </span><span class="hl-9">2</span><span class="hl-11">)</span><span class="hl-5">}</span><span class="hl-2">`</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">getInfoFromExistingDatabase</span><span class="hl-1"> = </span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name  ===================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 2. Get server information ==================================================</span><br/><span class="hl-1">  </span><span class="hl-7">// call service without parameters:</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-8">version</span><span class="hl-1"> } = (</span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getServerInformation</span><span class="hl-1">()).</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Server version </span><span class="hl-5">${</span><span class="hl-3">version</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 3. Get database information for &quot;orders&quot; =================================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">dbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// call service with embedded parameters:</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">dbInfo</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getDatabaseInformation</span><span class="hl-1">({ </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">dbName</span><span class="hl-1"> });</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">documentCount</span><span class="hl-1"> = </span><span class="hl-3">dbInfo</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">docCount</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">dbNameResult</span><span class="hl-1"> = </span><span class="hl-3">dbInfo</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">dbName</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 4. Show document count in database =========================================</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">`Document count in &quot;</span><span class="hl-5">${</span><span class="hl-3">dbNameResult</span><span class="hl-5">}</span><span class="hl-2">&quot; database is </span><span class="hl-5">${</span><span class="hl-3">documentCount</span><span class="hl-5">}</span><span class="hl-2">.`</span><br/><span class="hl-1">  );</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 5. Get &quot;example&quot; document out of the database by document id ===================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">getDocParams</span><span class="hl-1"> = { </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">dbName</span><span class="hl-1">, </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1"> };</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// call service with predefined parameters:</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">documentExample</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getDocument</span><span class="hl-1">(</span><span class="hl-3">getDocParams</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// result object is defined as a Document here:</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-8">result</span><span class="hl-1"> } = </span><span class="hl-3">documentExample</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">`Document retrieved from database:</span><span class="hl-10">\n</span><span class="hl-5">${</span><span class="hl-8">JSON</span><span class="hl-11">.</span><span class="hl-0">stringify</span><span class="hl-11">(</span><span class="hl-3">result</span><span class="hl-11">, </span><span class="hl-5">null</span><span class="hl-11">, </span><span class="hl-9">2</span><span class="hl-11">)</span><span class="hl-5">}</span><span class="hl-2">`</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">require</span><span class="hl-1">.</span><span class="hl-3">main</span><span class="hl-1"> === </span><span class="hl-6">module</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">getInfoFromExistingDatabase</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
</details>
When you run the code, you see a result similar to the following output.
<pre><code class="text">Server version 3.2.1
Document count in &quot;orders&quot; database is 1.
Document retrieved from database:
{
  &quot;_id&quot;: &quot;example&quot;,
  &quot;_rev&quot;: &quot;1-1b403633540686aa32d013fda9041a5d&quot;,
  &quot;name&quot;: &quot;Bob Smith&quot;,
  &quot;joined&quot;: &quot;2019-01-24T10:42:59.000Z&quot;
}
</code><button type="button">Copy</button></pre>

<h4 id="3-update-your-previously-created-document" class="tsd-anchor-link">3. Update your previously created document<a href="#3-update-your-previously-created-document" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><strong>Note</strong>: This example code assumes that you have created both the <code>orders</code>
database and the <code>example</code> document by
<a href="#1-create-a-database-and-add-a-document">running the previous example code</a>
successfully. Otherwise, the following error message occurs, &quot;Cannot update document because either 'orders'
database or 'example' document was not found.&quot;</p>
<details>
<summary>Update code example</summary>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-6">OrderDocument</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">Document</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">address</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">joined</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">_id</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">_rev</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name ======================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-7">// 2. Update the document =======================================================</span><br/><span class="hl-7">// Set the options to get the document out of the database if it exists</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// Try to get the document if it previously existed in the database</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">getDocParams</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">GetDocumentParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-7">// ==============================================================================</span><br/><span class="hl-7">// Note : for response byte stream use:</span><br/><span class="hl-7">/*</span><br/><span class="hl-7">const getdocAsStreamParam: CloudantV1.GetDocumentAsStreamParams = {</span><br/><span class="hl-7">  docId: &#39;example&#39;,</span><br/><span class="hl-7">  db: exampleDbName,</span><br/><span class="hl-7">};</span><br/><span class="hl-7">client</span><br/><span class="hl-7">  .getDocumentAsStream(getdocAsStreamParam)</span><br/><span class="hl-7">  .then((documentAsByteStream) =&gt; {...});</span><br/><span class="hl-7">*/</span><br/><span class="hl-7">// ==============================================================================</span><br/><br/><span class="hl-3">client</span><br/><span class="hl-1">  .</span><span class="hl-0">getDocument</span><span class="hl-1">(</span><span class="hl-3">getDocParams</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">docResult</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// using OrderDocument on getDocument result:</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">document</span><span class="hl-1">: </span><span class="hl-6">OrderDocument</span><span class="hl-1"> = </span><span class="hl-3">docResult</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Add Bob Smith&#39;s address to the document</span><br/><span class="hl-1">    </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">address</span><span class="hl-1"> = </span><span class="hl-2">&#39;19 Front Street, Darlington, DL5 1TY&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Remove the joined property from document object</span><br/><span class="hl-1">    </span><span class="hl-5">delete</span><span class="hl-1"> </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">joined</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Update the document in the database</span><br/><span class="hl-1">    </span><span class="hl-3">client</span><br/><span class="hl-1">      .</span><span class="hl-0">postDocument</span><span class="hl-1">({ </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">, </span><span class="hl-3">document</span><span class="hl-1"> })</span><br/><span class="hl-1">      </span><span class="hl-7">// ========================================================================</span><br/><span class="hl-1">      </span><span class="hl-7">// Note 1: for request byte stream use:</span><br/><span class="hl-1">      </span><span class="hl-7">// .postDocument(</span><br/><span class="hl-1">      </span><span class="hl-7">//   {db: exampleDbName, document: documentAsByteStream}</span><br/><span class="hl-1">      </span><span class="hl-7">// )</span><br/><span class="hl-1">      </span><span class="hl-7">// ========================================================================</span><br/><br/><span class="hl-1">      </span><span class="hl-7">// ========================================================================</span><br/><span class="hl-1">      </span><span class="hl-7">// Note 2: updating the document can also be done with the &quot;putDocument&quot; function.</span><br/><span class="hl-1">      </span><span class="hl-7">// `docId` and `rev` are required for an UPDATE operation,</span><br/><span class="hl-1">      </span><span class="hl-7">// but `rev` can be provided in the document object as `_rev` too:</span><br/><span class="hl-1">      </span><span class="hl-7">/*</span><br/><span class="hl-7">      .putDocument({</span><br/><span class="hl-7">        db: exampleDbName,</span><br/><span class="hl-7">        docId: document._id, // docId is a required parameter</span><br/><span class="hl-7">        rev: document._rev,</span><br/><span class="hl-7">        document, // _rev in the document object CAN replace above `rev` parameter</span><br/><span class="hl-7">      })</span><br/><span class="hl-7">      */</span><br/><span class="hl-1">      </span><span class="hl-7">// ========================================================================</span><br/><span class="hl-1">      .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">res</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">// Keeping track of the latest revision number of the document object</span><br/><span class="hl-1">        </span><span class="hl-7">// is necessary for further UPDATE/DELETE operations:</span><br/><span class="hl-1">        </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">_rev</span><span class="hl-1"> = </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-2">`You have updated the document:</span><span class="hl-10">\n</span><span class="hl-5">${</span><span class="hl-8">JSON</span><span class="hl-11">.</span><span class="hl-0">stringify</span><span class="hl-11">(</span><span class="hl-3">document</span><span class="hl-11">, </span><span class="hl-5">null</span><span class="hl-11">, </span><span class="hl-9">2</span><span class="hl-11">)</span><span class="hl-5">}</span><span class="hl-2">`</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">code</span><span class="hl-1"> === </span><span class="hl-9">404</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`Cannot update document because either &quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database or the &quot;example&quot; `</span><span class="hl-1"> +</span><br/><span class="hl-1">          </span><span class="hl-2">`document was not found.`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">updateDoc</span><span class="hl-1"> = </span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name ====================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-1">  </span><span class="hl-7">// 2. Update the document =====================================================</span><br/><span class="hl-1">  </span><span class="hl-7">// Set the options to get the document out of the database if it exists</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Try to get the document if it previously existed in the database</span><br/><span class="hl-1">  </span><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">document</span><span class="hl-1"> = (</span><br/><span class="hl-1">      </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getDocument</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    ).</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><span class="hl-1">    </span><span class="hl-7">// Note: for response byte stream use:</span><br/><span class="hl-1">    </span><span class="hl-7">/*</span><br/><span class="hl-7">    const documentAsByteStream = (</span><br/><span class="hl-7">      await client.getDocumentAsStream({</span><br/><span class="hl-7">        docId: &#39;example&#39;,</span><br/><span class="hl-7">        db: exampleDbName,</span><br/><span class="hl-7">      })</span><br/><span class="hl-7">    ).result;</span><br/><span class="hl-7">    */</span><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Add Bob Smith&#39;s address to the document</span><br/><span class="hl-1">    </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">address</span><span class="hl-1"> = </span><span class="hl-2">&#39;19 Front Street, Darlington, DL5 1TY&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Remove the joined property from document object</span><br/><span class="hl-1">    </span><span class="hl-5">delete</span><span class="hl-1"> </span><span class="hl-3">document</span><span class="hl-1">[</span><span class="hl-2">&#39;joined&#39;</span><span class="hl-1">];</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Keeping track of the latest revision number of the document object</span><br/><span class="hl-1">    </span><span class="hl-7">// is necessary for further UPDATE/DELETE operations:</span><br/><span class="hl-1">    </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-0">_rev</span><span class="hl-1"> = (</span><br/><span class="hl-1">      </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">postDocument</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">document</span><span class="hl-1">, </span><span class="hl-7">// _id and _rev MUST be inside the document object</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    ).</span><span class="hl-3">result</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><span class="hl-1">    </span><span class="hl-7">// Note 1: for request byte stream use:</span><br/><span class="hl-1">    </span><span class="hl-7">/*</span><br/><span class="hl-7">    document._rev = (</span><br/><span class="hl-7">      await client.postDocument({</span><br/><span class="hl-7">        db: exampleDbName,</span><br/><span class="hl-7">        document: documentAsByteStream,</span><br/><span class="hl-7">      })</span><br/><span class="hl-7">    ).result.rev;</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><span class="hl-1">    </span><span class="hl-7">// Note 2: updating the document can also be done with the &quot;putDocument&quot; function.</span><br/><span class="hl-1">    </span><span class="hl-7">// `docId` and `rev` are required for an UPDATE operation,</span><br/><span class="hl-1">    </span><span class="hl-7">// but `rev` can be provided in the document object as `_rev` too:</span><br/><span class="hl-1">    </span><span class="hl-7">/*</span><br/><span class="hl-7">    document._rev = (</span><br/><span class="hl-7">      await client.putDocument({</span><br/><span class="hl-7">        db: exampleDbName,</span><br/><span class="hl-7">        docId: document._id, // docId is a required parameter</span><br/><span class="hl-7">        rev: document._rev,</span><br/><span class="hl-7">        document // _rev in the document object CAN replace above `rev` parameter</span><br/><span class="hl-7">      })</span><br/><span class="hl-7">    ).result.rev;</span><br/><span class="hl-7">    */</span><br/><span class="hl-1">    </span><span class="hl-7">// ==========================================================================</span><br/><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-2">`You have updated the document:</span><span class="hl-10">\n</span><span class="hl-5">${</span><span class="hl-8">JSON</span><span class="hl-11">.</span><span class="hl-0">stringify</span><span class="hl-11">(</span><span class="hl-3">document</span><span class="hl-11">, </span><span class="hl-5">null</span><span class="hl-11">, </span><span class="hl-9">2</span><span class="hl-11">)</span><span class="hl-5">}</span><span class="hl-2">`</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">  } </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">code</span><span class="hl-1"> === </span><span class="hl-9">404</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`Cannot update document because either &quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database or the &quot;example&quot; `</span><span class="hl-1"> +</span><br/><span class="hl-1">          </span><span class="hl-2">`document was not found.`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">require</span><span class="hl-1">.</span><span class="hl-3">main</span><span class="hl-1"> === </span><span class="hl-6">module</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">updateDoc</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
</details>
When you run the code, you see a result similar to the following output.
<pre><code class="text">You have updated the document:
{
  &quot;_id&quot;: &quot;example&quot;,
  &quot;_rev&quot;: &quot;2-4e2178e85cffb32d38ba4e451f6ca376&quot;,
  &quot;name&quot;: &quot;Bob Smith&quot;,
  &quot;address&quot;: &quot;19 Front Street, Darlington, DL5 1TY&quot;
}
</code><button type="button">Copy</button></pre>

<h4 id="4-delete-your-previously-created-document" class="tsd-anchor-link">4. Delete your previously created document<a href="#4-delete-your-previously-created-document" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><strong>Note</strong>: This example code assumes that you have created both the <code>orders</code>
database and the <code>example</code> document by
<a href="#1-create-a-database-and-add-a-document">running the previous example code</a>
successfully. Otherwise, the following error message occurs, &quot;Cannot delete document because either 'orders'
database or 'example' document was not found.&quot;</p>
<details>
<summary>Delete code example</summary>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-6">OrderDocument</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">Document</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">name</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">address</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">joined</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">_id</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">_rev</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name ======================</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><br/><span class="hl-7">// 2. Delete the document =======================================================</span><br/><span class="hl-7">// Set the options to get the document out of the database if it exists</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDocId</span><span class="hl-1"> = </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// Try to get the document if it previously existed in the database</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">getDocParams</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">GetDocumentParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-3">exampleDocId</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">client</span><br/><span class="hl-1">  .</span><span class="hl-0">getDocument</span><span class="hl-1">(</span><span class="hl-3">getDocParams</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-3">docResult</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">document</span><span class="hl-1">: </span><span class="hl-6">OrderDocument</span><span class="hl-1"> = </span><span class="hl-3">docResult</span><span class="hl-1">.</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-3">client</span><br/><span class="hl-1">      .</span><span class="hl-0">deleteDocument</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">_id</span><span class="hl-1">, </span><span class="hl-7">// `docId` is required for DELETE</span><br/><span class="hl-1">        </span><span class="hl-3">rev:</span><span class="hl-1"> </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">_rev</span><span class="hl-1">, </span><span class="hl-7">// `rev` is required for DELETE</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">      .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;You have deleted the document.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">code</span><span class="hl-1"> === </span><span class="hl-9">404</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`Cannot delete document because either &quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database or the &quot;example&quot; `</span><span class="hl-1"> +</span><br/><span class="hl-1">          </span><span class="hl-2">`document was not found.`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">deleteDoc</span><span class="hl-1"> = </span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// 1. Create a client with `CLOUDANT` default service name ====================</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// 2. Delete the document =====================================================</span><br/><span class="hl-1">  </span><span class="hl-7">// Set the options to get the document out of the database if it exists</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDbName</span><span class="hl-1"> = </span><span class="hl-2">&#39;orders&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">exampleDocId</span><span class="hl-1"> = </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Try to get the document if it previously existed in the database</span><br/><span class="hl-1">  </span><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">document</span><span class="hl-1"> = (</span><br/><span class="hl-1">      </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">getDocument</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-3">exampleDocId</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    ).</span><span class="hl-3">result</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">client</span><span class="hl-1">.</span><span class="hl-0">deleteDocument</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-3">exampleDbName</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">docId:</span><span class="hl-1"> </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">_id</span><span class="hl-1">, </span><span class="hl-7">// `docId` is required for DELETE</span><br/><span class="hl-1">      </span><span class="hl-3">rev:</span><span class="hl-1"> </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-3">_rev</span><span class="hl-1">, </span><span class="hl-7">// `rev` is required for DELETE</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;You have deleted the document.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">code</span><span class="hl-1"> === </span><span class="hl-9">404</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`Cannot delete document because either &quot;</span><span class="hl-5">${</span><span class="hl-3">exampleDbName</span><span class="hl-5">}</span><span class="hl-2">&quot; database or the &quot;example&quot; `</span><span class="hl-1"> +</span><br/><span class="hl-1">          </span><span class="hl-2">`document was not found.`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">require</span><span class="hl-1">.</span><span class="hl-3">main</span><span class="hl-1"> === </span><span class="hl-6">module</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">deleteDoc</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
</details>
When you run the code, you see the following output.
<pre><code class="text">You have deleted the document.
</code><button type="button">Copy</button></pre>

<h4 id="further-code-examples" class="tsd-anchor-link">Further code examples<a href="#further-code-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For a complete list of code examples, see the <a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/examples#examples-for-node">examples directory</a>.</p>
<h3 id="error-handling" class="tsd-anchor-link">Error handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>For sample code on handling errors, see
<a href="https://cloud.ibm.com/apidocs/cloudant?code=node#error-handling">Cloudant API docs</a>.</p>
<h3 id="raw-io" class="tsd-anchor-link">Raw IO<a href="#raw-io" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>For endpoints that read or write document content it is possible to bypass
usage of the built-in interface with byte streams.</p>
<p>Depending on the specific SDK operation it may be possible to:</p>
<ul>
<li>accept a user-provided byte stream to send to the server as a request body</li>
<li>return a byte stream of the server response body to the user</li>
</ul>
<p>Request byte stream can be supplied for <code>NodeJS.ReadableStream</code> or <code>Buffer</code> type parameters
.
For these cases you can pass this byte stream directly to the HTTP request body.</p>
<p>Response byte stream is supported in functions with the suffix of <code>AsStream</code>.
The returned byte stream allows the response body to be consumed
without triggering JSON unmarshalling that is typically performed by the SDK.</p>
<p>The <a href="#3-update-your-previously-created-document">update document</a> section
contains examples for both request and response byte stream cases.</p>
<p>The API reference contains further examples of using byte streams.
They are titled &quot;Example request as stream&quot; and are initially collapsed.
Expand them to see examples of:</p>
<ul>
<li>
<p>Byte requests:</p>
<ul>
<li><a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postbulkdocs">Bulk modify multiple documents in a database</a></li>
</ul>
</li>
<li>
<p>Byte responses:</p>
<ul>
<li><a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postalldocs">Query a list of all documents in a database</a></li>
<li><a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postchanges">Query the database document changes feed</a></li>
</ul>
</li>
</ul>
<h3 id="further-resources" class="tsd-anchor-link">Further resources<a href="#further-resources" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><a href="https://cloud.ibm.com/apidocs/cloudant?code=node">Cloudant API docs</a>:
API reference including usage examples for Cloudant Node.js SDK API.</li>
<li><a href="https://ibm.github.io/cloudant-node-sdk/">TypeDoc</a>:
Cloudant Node.js SDK API Documentation.</li>
<li><a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-getting-started-with-cloudant">Cloudant docs</a>:
The official documentation page for Cloudant.</li>
<li><a href="https://blog.cloudant.com/">Cloudant blog</a>:
Many useful articles about how to optimize Cloudant for common problems.</li>
</ul>
<h3 id="browser-usage" class="tsd-anchor-link">Browser usage<a href="#browser-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can use the SDK directly from JavaScript running in a browser if:</p>
<ul>
<li>Polyfills for required Node.js system modules are available.</li>
<li>The server configuration allows cross-origin resource sharing (CORS).</li>
</ul>
<h4 id="polyfills" class="tsd-anchor-link">Polyfills<a href="#polyfills" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Use either:</p>
<ul>
<li>A bundler that includes polyfills for Node.js system modules in the browser.</li>
<li>Or a Node.js compatible browser-based runtime.</li>
</ul>
<p>The Node.js system modules required are:</p>
<ul>
<li><code>assert</code></li>
<li><code>buffer</code></li>
<li><code>crypto</code></li>
<li><code>fs</code></li>
<li><code>http</code></li>
<li><code>https</code></li>
<li><code>os</code></li>
<li><code>path</code></li>
<li><code>process</code></li>
<li><code>querystring</code></li>
<li><code>stream</code></li>
<li><code>timers</code></li>
<li><code>url</code></li>
<li><code>util</code></li>
<li><code>vm</code></li>
<li><code>zlib</code></li>
</ul>
<p>Additionally the SDK or its dependencies need to be able to resolve the globals:</p>
<ul>
<li><code>Buffer</code></li>
<li><code>process</code></li>
<li><code>Readable</code></li>
<li><code>setImmediate</code> and <code>setTimeout</code></li>
</ul>
<p>Environment variables:</p>
<ul>
<li><code>NODE_DEBUG</code> (must be resolvable from the <code>process.env</code> even if it is unset)</li>
</ul>
<p>It may be possible to omit some of these requirements for specific use cases.</p>
<h4 id="cors" class="tsd-anchor-link">CORS<a href="#cors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>To allow CORS requests from the SDK in the browser:</p>
<ol>
<li>Configure the server with a CORS origin matching the URL protocol, host and port of the JavaScript application.</li>
<li>Either
<ul>
<li>Configure the server with a CORS headers allow list that includes the default headers plus the SDK's extra headers:
<ul>
<li><code>user-agent</code></li>
<li><code>x-ibmcloud-sdk-analytics</code></li>
<li><code>content-encoding</code> (unless SDK <a href="media/KNOWN_ISSUES.md#Disabling-request-body-compression">request body compression is disabled</a>)</li>
</ul>
</li>
<li>Or configure the SDK to remove the extra headers from requests, for example:<pre><code class="js"><span class="hl-7">// Set a request interceptor to remove the headers from the requests</span><br/><span class="hl-3">service</span><span class="hl-1">.</span><span class="hl-0">getHttpClient</span><span class="hl-1">().</span><span class="hl-3">interceptors</span><span class="hl-1">.</span><span class="hl-3">request</span><span class="hl-1">.</span><span class="hl-0">use</span><span class="hl-1">(</span><span class="hl-3">requestConfig</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-5">delete</span><span class="hl-1"> </span><span class="hl-3">requestConfig</span><span class="hl-1">.</span><span class="hl-3">headers</span><span class="hl-1">[</span><span class="hl-2">&#39;User-Agent&#39;</span><span class="hl-1">]</span><br/><span class="hl-5">delete</span><span class="hl-1"> </span><span class="hl-3">requestConfig</span><span class="hl-1">.</span><span class="hl-3">headers</span><span class="hl-1">[</span><span class="hl-2">&#39;X-IBMCloud-SDK-Analytics&#39;</span><span class="hl-1">]</span><br/><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-3">requestConfig</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><span class="hl-7">// Disable request body compression</span><br/><span class="hl-3">service</span><span class="hl-1">.</span><span class="hl-0">setEnableGzipCompression</span><span class="hl-1">(</span><span class="hl-5">false</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
</li>
</ol>
<h3 id="changes-feed-follower" class="tsd-anchor-link">Changes feed follower<a href="#changes-feed-follower" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="introduction" class="tsd-anchor-link">Introduction<a href="#introduction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The SDK provides a changes feed follower utility.
This helper utility connects to the <code>_changes</code> endpoint and returns the individual change items.
It removes some complexity of using the <code>_changes</code> endpoint by setting some options automatically
and providing error suppression and retries.</p>
<p><em>Tip: the changes feed often does not meet user expectations or assumptions.</em></p>
<p>Consult the <a href="https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-faq-using-changes-feed">Cloudant changes feed FAQ</a>
to get a better understanding of the limitations and suitable use-cases before using the changes feed in your application.</p>
<h4 id="modes-of-operation" class="tsd-anchor-link">Modes of operation<a href="#modes-of-operation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>There are two modes of operation:</p>
<ul>
<li>Start mode
<ul>
<li>Fetches the changes from the supplied <code>since</code> sequence (in this mode follower defaults to reading the feed from <code>now</code>).</li>
<li>Fetches all available changes and then continues listening for new changes indefinitely unless encountering an end condition.</li>
<li>An example use case for this mode is event driven workloads.</li>
</ul>
</li>
<li>Start one-off mode
<ul>
<li>Fetches the changes from the supplied <code>since</code> sequence (in this mode follower defaults to reading the feed from the beginning).</li>
<li>Fetches all available changes and then stops when either there are no further changes pending or encountering an end condition.</li>
<li>An example use case for this mode is ETL style workloads.</li>
</ul>
</li>
</ul>
<h4 id="configuring-the-changes-follower" class="tsd-anchor-link">Configuring the changes follower<a href="#configuring-the-changes-follower" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The SDK's model of changes feed options is also used to configure the follower.
However, a subset of the options used internally by the follower implementation are invalid.
Supplying these options when instantiating the follower causes an error.
The invalid options are:</p>
<ul>
<li><code>descending</code></li>
<li><code>feed</code></li>
<li><code>heartbeat</code></li>
<li><code>lastEventId</code> - use <code>since</code> instead</li>
<li><code>timeout</code></li>
<li>Follower permits only the value <code>_selector</code> for the <code>filter</code> option. This restriction is because selector
based filters perform better than JavaScript backed filters. Configuring a non-selector based filter
causes the follower to error.</li>
</ul>
<p>Note that the <code>limit</code> parameter terminates the follower at the given number of changes in either
operating mode.</p>
<p>The changes follower requires the client to have HTTP timeouts of at least 1 minute and errors during
instantiation if it is insufficient. The default client configuration has sufficiently long timeouts.</p>
<p>For use-cases where these configuration limitations are too restrictive then write code to use the SDK's
<a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/examples#postchanges">POST <code>_changes</code> API</a> instead of the follower.</p>
<h4 id="error-suppression" class="tsd-anchor-link">Error suppression<a href="#error-suppression" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>By default, the changes follower suppresses transient errors indefinitely and attempts to run to completion or listen forever as
dictated by the operating mode.
For applications where that is not desirable configure the optional error tolerance duration. This controls the time since
the last successful response that the follower suppresses transient errors. An example usage is an application grace period
before reporting an error and requiring intervention.</p>
<p>There are some additional points to consider for error suppression:</p>
<ul>
<li>Errors considered terminal, for example, the database not existing or invalid credentials are never suppressed and error immediately.</li>
<li>The error suppression duration is not guaranteed to fire immediately after lapsing and is a minimum suppression time.</li>
<li>The changes follower backs-off between retries and as such may remain paused for a short while after the transient errors have resolved.</li>
<li>If the underlying SDK client used to initialize the follower also has retries configured then suppression of errors may last
significantly longer than the follower's configured error tolerance duration depending on the specific options.</li>
</ul>
<h4 id="follower-operation" class="tsd-anchor-link">Follower operation<a href="#follower-operation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For both modes:</p>
<ul>
<li>The end conditions are:
<ul>
<li>A terminal error (HTTP codes <code>400</code>, <code>401</code>, <code>403</code> <code>404</code>).</li>
<li>Transient errors occur for longer than the error tolerance duration. Transient errors are all other HTTP status codes and connection errors.</li>
<li>The number of changes received reaches the configured <code>limit</code>.</li>
<li>The application calls stop to terminate the feed early.</li>
</ul>
</li>
</ul>
<p>As is true for the <code>_changes</code> endpoint change items have <em>at least once</em> delivery and callers may receive
an individual item multiple times. When using the follower change items may repeat even within a limited
number of changes (that is using the <code>limit</code> option) this is a minor difference from using <code>limit</code> on the HTTP native API.</p>
<p>The follower is not optimized for some use cases and it is not recommended to use it in cases where:</p>
<ul>
<li>Setting <code>include_docs</code> and larger document sizes (for example &gt; 10 kiB).</li>
<li>The volume of changes is very high (if the rate of changes in the database exceeds the follower's rate of pulling them it can never catch-up).</li>
</ul>
<p>In these use-cases use the SDK's <a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/examples#postchanges">POST <code>_changes</code> API</a>
for  specific control over the number of change requests made and the content size of the responses.</p>
<h4 id="checkpoints" class="tsd-anchor-link">Checkpoints<a href="#checkpoints" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The changes follower does not checkpoint since it has no information about whether the consuming application
has processed a change item after delivery. It is the application developer's responsibility
to store the sequence IDs to have appropriate checkpoints and to re-initialize the follower with the required
<code>since</code> value after, for example, the application restarts.</p>
<p>The frequency and conditions for checkpoints are application specific and some applications may be tolerant
of dropped changes. This section provides only general guidance on how to avoid missing changes.</p>
<p>To guarantee processing of all changes do not persist the sequence ID from a change item until <em>after</em>
the processing of the change item by the application has completed. As indicated previously change item
delivery is <em>at least once</em> so application code must be able to handle repeated changes already. It is
preferable to restart from an older <code>since</code> value and receive changes again than risk missing them.</p>
<p>The sequence IDs are available on each change item by default. However, the server omits sequence IDs from
some change items when using the <code>seq_interval</code> configuration option.
Infrequent sequence IDs may improve performance by reducing the amount of data transfer and server load,
but the tradeoff is repeating more changes if it is necessary to resume the changes follower.</p>
<p>Take extreme care persisting sequences if choosing to process change items in parallel as there
is a considerable risk of missing changes on a restart if the recorded sequence is out of order.</p>
<h4 id="code-examples-1" class="tsd-anchor-link">Code examples<a href="#code-examples-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><h5 id="initializing-a-changes-follower" class="tsd-anchor-link">Initializing a changes follower<a href="#initializing-a-changes-follower" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">PostChangesParams</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant/cloudant/v1&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1">: </span><span class="hl-6">PostChangesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">, </span><span class="hl-7">// Required: the database name.</span><br/><span class="hl-1">  </span><span class="hl-3">limit:</span><span class="hl-1"> </span><span class="hl-9">100</span><span class="hl-1">, </span><span class="hl-7">// Optional: return only 100 changes (including duplicates).</span><br/><span class="hl-1">  </span><span class="hl-3">since:</span><span class="hl-1"> </span><span class="hl-2">&#39;3-g1AG3...&#39;</span><span class="hl-1"> </span><span class="hl-7">// Optional: start from this sequence ID (e.g. with a value read from persistent storage).</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">errorTolerance</span><span class="hl-1">: </span><span class="hl-6">number</span><span class="hl-1"> = </span><span class="hl-9">10000</span><span class="hl-1">; </span><span class="hl-7">// 10 second duration to suppress transient errors</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1">: </span><span class="hl-6">ChangesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-7">// Required: the Cloudant service client instance.</span><br/><span class="hl-1">  </span><span class="hl-3">changesParams</span><span class="hl-1">, </span><span class="hl-7">// Required: changes feed configuration options dict.</span><br/><span class="hl-1">  </span><span class="hl-9">10000</span><span class="hl-1"> </span><span class="hl-7">// Optional: suppress transient errors for at least 10 seconds before terminating.</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">, </span><span class="hl-7">// Required: the database name.</span><br/><span class="hl-1">  </span><span class="hl-3">limit:</span><span class="hl-1"> </span><span class="hl-9">100</span><span class="hl-1">, </span><span class="hl-7">// Optional: return only 100 changes (including duplicates).</span><br/><span class="hl-1">  </span><span class="hl-3">since:</span><span class="hl-1"> </span><span class="hl-2">&#39;3-g1AG3...&#39;</span><span class="hl-1"> </span><span class="hl-7">// Optional: start from this sequence ID (e.g. with a value read from persistent storage).</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-7">// Required: the Cloudant service client instance.</span><br/><span class="hl-1">  </span><span class="hl-3">changesParams</span><span class="hl-1">, </span><span class="hl-7">// Required: changes feed configuration options dict.</span><br/><span class="hl-1">  </span><span class="hl-9">10000</span><span class="hl-1"> </span><span class="hl-7">// Optional: suppress transient errors for at least 10 seconds before terminating.</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="starting-the-changes-follower" class="tsd-anchor-link">Starting the changes follower<a href="#starting-the-changes-follower" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><h6 id="start-mode-for-continuous-listening" class="tsd-anchor-link">Start mode for continuous listening<a href="#start-mode-for-continuous-listening" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h6><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1">, </span><span class="hl-3">Stream</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">PostChangesParams</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant/cloudant/v1&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1">: </span><span class="hl-6">PostChangesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1">: </span><span class="hl-6">ChangesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">&gt; = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><span class="hl-7">// Create for-async-loop or pipeline to begin the flow of changes</span><br/><span class="hl-7">// e.g. pipeline(changesItemsStream, destinationStream).then(() =&gt; { ... }).catch((err) =&gt; { ... });</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1"> = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><span class="hl-7">// Create for-async-loop or pipeline to begin the flow of changes</span><br/><span class="hl-7">// e.g. pipeline(changesItemsStream, destinationStream).then(() =&gt; { ... }).catch((err) =&gt; { ... });</span>
</code><button type="button">Copy</button></pre>

</details>
<h6 id="start-mode-for-one-off-fetching" class="tsd-anchor-link">Start mode for one-off fetching<a href="#start-mode-for-one-off-fetching" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h6><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1">, </span><span class="hl-3">Stream</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">PostChangesParams</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant/cloudant/v1&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1">: </span><span class="hl-6">PostChangesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1">: </span><span class="hl-6">ChangesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">&gt; = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">startOneOff</span><span class="hl-1">();</span><br/><span class="hl-7">// Create for-async-loop or pipeline to begin the flow of changes</span><br/><span class="hl-7">// e.g. pipeline(changesItemsStream, destinationStream).then(() =&gt; { ... }).catch((err) =&gt; { ... });</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1"> = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">startOneOff</span><span class="hl-1">();</span><br/><span class="hl-7">// Create for-async-loop or pipeline to begin the flow of changes</span><br/><span class="hl-7">// e.g. pipeline(changesItemsStream, destinationStream).then(() =&gt; { ... }).catch((err) =&gt; { ... });</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="processing-changes" class="tsd-anchor-link">Processing changes<a href="#processing-changes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><h6 id="process-continuous-changes" class="tsd-anchor-link">Process continuous changes<a href="#process-continuous-changes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h6><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1">, </span><span class="hl-3">Stream</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">PostChangesParams</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant/cloudant/v1&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-7">// Start from a previously persisted seq</span><br/><span class="hl-7">// Normally this would be read by the app from persistent storage</span><br/><span class="hl-7">// e.g. previouslyPersistedSeq = yourAppPersistenceReadFunc()</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">previouslyPersistedSeq</span><span class="hl-1"> = </span><span class="hl-2">&#39;3-g1AG3...&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1">: </span><span class="hl-6">PostChangesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">since:</span><span class="hl-1"> </span><span class="hl-3">previouslyPersistedSeq</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">&gt; = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// do something with change item</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">change</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">changes</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">change</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">// when change item processing is complete app can store seq</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">seq</span><span class="hl-1"> = </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">seq</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">// write seq to persistent storage for use as since if required to resume later</span><br/><span class="hl-1">    </span><span class="hl-7">// e.g. yourAppPersistenceWriteFunc()</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// A pipeline to keep processing changes until the follower is stopped or some other stop condition is reached</span><br/><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">changesItemsStream</span><span class="hl-1">, </span><span class="hl-3">destinationStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Stopped&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span><br/><span class="hl-7">// Start from a previously persisted seq</span><br/><span class="hl-7">// Normally this would be read by the app from persistent storage</span><br/><span class="hl-7">// e.g. previouslyPersistedSeq = yourAppPersistenceReadFunc()</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">previouslyPersistedSeq</span><span class="hl-1"> = </span><span class="hl-2">&#39;3-g1AG3...&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">since:</span><span class="hl-1"> </span><span class="hl-3">previouslyPersistedSeq</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1"> = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// do something with change item</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">change</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">changes</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">change</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">// when change item processing is complete app can store seq</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">seq</span><span class="hl-1"> = </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">seq</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">// write seq to persistent storage for use as since if required to resume later</span><br/><span class="hl-1">    </span><span class="hl-7">// e.g. yourAppPersistenceWriteFunc()</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// A pipeline to keep processing changes until the follower is stopped or some other stop condition is reached</span><br/><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">changesItemsStream</span><span class="hl-1">, </span><span class="hl-3">destinationStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Stopped&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

</details>
<h6 id="process-one-off-changes" class="tsd-anchor-link">Process one-off changes<a href="#process-one-off-changes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h6><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1">, </span><span class="hl-3">Stream</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">PostChangesParams</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant/cloudant/v1&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-7">// Start from a previously persisted seq</span><br/><span class="hl-7">// Normally this would be read by the app from persistent storage</span><br/><span class="hl-7">// e.g. previouslyPersistedSeq = yourAppPersistenceReadFunc()</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">previouslyPersistedSeq</span><span class="hl-1"> = </span><span class="hl-2">&#39;3-g1AG3...&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1">: </span><span class="hl-6">PostChangesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">since:</span><span class="hl-1"> </span><span class="hl-3">previouslyPersistedSeq</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1">: </span><span class="hl-6">ChangesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">&gt; = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">startOneOff</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// do something with change item</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">change</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">changes</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">change</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">// when change item processing is complete app can store seq</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">seq</span><span class="hl-1"> = </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">seq</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">// write seq to persistent storage for use as since if required to resume later</span><br/><span class="hl-1">    </span><span class="hl-7">// e.g. yourAppPersistenceWriteFunc()</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">changesItemsStream</span><span class="hl-1">, </span><span class="hl-3">destinationStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;All changes done&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-7">// use for-async-loop feature for stream</span><br/><span class="hl-7">/*</span><br/><span class="hl-7">getChangesFromFollower(changesItemsStream);</span><br/><span class="hl-7">async function getChangesFromFollower(changesItemsStream: Stream&lt;CloudantV1.ChangesResultItem&gt;) {</span><br/><span class="hl-7">  for await (const changesItem of changesItemsStream) {</span><br/><span class="hl-7">    // do something with change item</span><br/><span class="hl-7">    // write seq to persistent storage for use as since</span><br/><span class="hl-7">    console.log(changesItem.id);</span><br/><span class="hl-7">    for (const change of changesItem.changes) {</span><br/><span class="hl-7">      console.log(change.rev);</span><br/><span class="hl-7">    }</span><br/><span class="hl-7">    // when change item processing is complete app can store seq</span><br/><span class="hl-7">    seq = changesItem.seq;</span><br/><span class="hl-7">    // write seq to persistent storage for use as since if required to resume later</span><br/><span class="hl-7">    // e.g. yourAppPersistenceWriteFunc();</span><br/><span class="hl-7">  }</span><br/><span class="hl-7">}</span><br/><span class="hl-7">*/</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span><br/><span class="hl-7">// Start from a previously persisted seq</span><br/><span class="hl-7">// Normally this would be read by the app from persistent storage</span><br/><span class="hl-7">// e.g. previouslyPersistedSeq = yourAppPersistenceReadFunc()</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">previouslyPersistedSeq</span><span class="hl-1"> = </span><span class="hl-2">&#39;3-g1AG3...&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">since:</span><span class="hl-1"> </span><span class="hl-3">previouslyPersistedSeq</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1"> = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">startOneOff</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// do something with change item</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">change</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">changes</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">change</span><span class="hl-1">.</span><span class="hl-3">rev</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">// when change item processing is complete app can store seq</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">seq</span><span class="hl-1"> = </span><span class="hl-3">changesItem</span><span class="hl-1">.</span><span class="hl-3">seq</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">// write seq to persistent storage for use as since if required to resume later</span><br/><span class="hl-1">    </span><span class="hl-7">// e.g. yourAppPersistenceWriteFunc()</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">changesItemsStream</span><span class="hl-1">, </span><span class="hl-3">destinationStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;All changes done&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-7">// use for-async-loop feature for stream</span><br/><span class="hl-7">/*</span><br/><span class="hl-7">getChangesFromFollower(changesItemsStream);</span><br/><span class="hl-7">async function getChangesFromFollower(changesItemsStream) {</span><br/><span class="hl-7">  for await (const changesItem of changesItemsStream) {</span><br/><span class="hl-7">    // do something with change item</span><br/><span class="hl-7">    // write seq to persistent storage for use as since</span><br/><span class="hl-7">    console.log(changesItem.id);</span><br/><span class="hl-7">    for (const change of changesItem.changes) {</span><br/><span class="hl-7">      console.log(change.rev);</span><br/><span class="hl-7">    }</span><br/><span class="hl-7">    // when change item processing is complete app can store seq</span><br/><span class="hl-7">    seq = changesItem.seq;</span><br/><span class="hl-7">    // write seq to persistent storage for use as since if required to resume later</span><br/><span class="hl-7">    // e.g. yourAppPersistenceWriteFunc();</span><br/><span class="hl-7">  }</span><br/><span class="hl-7">}</span><br/><span class="hl-7">*/</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="stopping-the-changes-follower" class="tsd-anchor-link">Stopping the changes follower<a href="#stopping-the-changes-follower" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1">, </span><span class="hl-3">Stream</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">PostChangesParams</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant/cloudant/v1&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1">: </span><span class="hl-6">PostChangesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1">: </span><span class="hl-6">ChangesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">&gt; = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">ChangesResultItem</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Option 1: call stop after some condition</span><br/><span class="hl-1">    </span><span class="hl-7">// Note that at least one item</span><br/><span class="hl-1">    </span><span class="hl-7">// must be returned to reach to this point.</span><br/><span class="hl-1">    </span><span class="hl-7">// Additional changes may be processed before the iterator stops.</span><br/><span class="hl-1">    </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">stop</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">changesItemsStream</span><span class="hl-1">, </span><span class="hl-3">destinationStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Stopped&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-7">// Option 2: call stop method when you want to end the continuous loop from</span><br/><span class="hl-7">// outside the pipeline.</span><br/><span class="hl-7">// Normally the call would be made from some other application function</span><br/><span class="hl-7">// executing later.</span><br/><span class="hl-7">// For example, stop the changesFollower after 1 minute of listening for changes</span><br/><span class="hl-0">setTimeout</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">stop</span><span class="hl-1">();</span><br/><span class="hl-1">}, </span><span class="hl-9">60000</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">ChangesFollower</span><span class="hl-1">, </span><span class="hl-3">CloudantV1</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;example&#39;</span><br/><span class="hl-1">};</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesFollower</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ChangesFollower</span><span class="hl-1">(</span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-3">changesParams</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">changesItemsStream</span><span class="hl-1"> = </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">changesItem</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Option 1: call stop after some condition</span><br/><span class="hl-1">    </span><span class="hl-7">// Note that at least one item</span><br/><span class="hl-1">    </span><span class="hl-7">// must be returned to reach to this point.</span><br/><span class="hl-1">    </span><span class="hl-7">// Additional changes may be processed before the iterator stops.</span><br/><span class="hl-1">    </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">stop</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">changesItemsStream</span><span class="hl-1">, </span><span class="hl-3">destinationStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Stopped&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-7">// Option 2: call stop method when you want to end the continuous loop from</span><br/><span class="hl-7">// outside the pipeline.</span><br/><span class="hl-7">// Normally the call would be made from some other application function</span><br/><span class="hl-7">// executing later.</span><br/><span class="hl-7">// For example, stop the changesFollower after 1 minute of listening for changes</span><br/><span class="hl-0">setTimeout</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">changesFollower</span><span class="hl-1">.</span><span class="hl-0">stop</span><span class="hl-1">();</span><br/><span class="hl-1">}, </span><span class="hl-9">60000</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<h3 id="pagination-beta" class="tsd-anchor-link">Pagination (beta)<a href="#pagination-beta" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="introduction-1" class="tsd-anchor-link">Introduction<a href="#introduction-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The pagination feature (currently beta) accepts options for a single operation and automatically
creates the multiple requests to the server necessary to page through the results a fixed number at a time.</p>
<p>Pagination is a best-practice to break apart large queries into multiple server requests.
This has a number of advantages:</p>
<ul>
<li>Keeping requests within server imposed limits, for example
<ul>
<li><code>200</code> max results for text search</li>
<li><code>2000</code> max results for partitioned queries</li>
</ul>
</li>
<li>Fetching only the necessary data, for example
<ul>
<li>User finds required result on first page, no need to continue fetching results</li>
</ul>
</li>
<li>Reducing the duration of any individual query
<ul>
<li>Reduce risk of query timing out on the server</li>
<li>Reduce risk of network request timeouts</li>
</ul>
</li>
</ul>
<h4 id="limitations" class="tsd-anchor-link">Limitations<a href="#limitations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Limitations of pagination:</p>
<ul>
<li>Forward only, no backwards paging</li>
<li>Limitations on <code>_all_docs</code> and <code>_design_docs</code> operations
<ul>
<li>No pagination for <code>key</code> option.
There is no need to paginate as IDs are unique and this returns only a single row.
This is better achieved with a single document get request.</li>
<li>No pagination for <code>keys</code> option.</li>
</ul>
</li>
<li>Limitations on <code>_view</code> operations
<ul>
<li>No pagination for <code>key</code> option. Pass the same <code>key</code> as a start and end key instead.</li>
<li>No pagination for <code>keys</code> option.</li>
<li>Views that emit multiple identical keys (with the same or different values)
from the same document cannot paginate if those key rows with the same ID
span a page boundary.
The pagination feature detects this condition and an error occurs.
It may be possible to workaround using a different page size.</li>
</ul>
</li>
<li>Limitations on <code>_search</code> operations
<ul>
<li>No pagination of grouped results.</li>
<li>No pagination of faceted <code>counts</code> or <code>ranges</code> results.</li>
</ul>
</li>
</ul>
<h4 id="capacity-considerations" class="tsd-anchor-link">Capacity considerations<a href="#capacity-considerations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Pagination can make many requests rapidly from a single program call.</p>
<p>For IBM Cloudant take care to ensure you have appropriate plan capacity
in place to avoid consuming all the permitted requests.
If there is no remaining plan allowance and retries are not enabled or insufficient
then a <code>429 Too Many Requests</code> error occurs.</p>
<h4 id="available-operations" class="tsd-anchor-link">Available operations<a href="#available-operations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Pagination is available for these operations:</p>
<ul>
<li>Query all documents <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postalldocs">global</a>
and <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postpartitionalldocs">partitioned</a>
<ul>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/allDocsPagination.ts">Global all documents examples</a></li>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/partitionAllDocsPagination.ts">Partitioned all documents examples</a></li>
</ul>
</li>
<li>Query all <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postdesigndocs">design documents</a>
<ul>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/designDocsPagination.ts">Design documents examples</a></li>
</ul>
</li>
<li>Query with selector syntax <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postfind">global</a>
and <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postpartitionfind">partitioned</a>
<ul>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/findPagination.ts">Global find selector query examples</a></li>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/partitionFindPagination.ts">Partitioned find selector query examples</a></li>
</ul>
</li>
<li>Query a search index <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postsearch">global</a>
and <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postpartitionsearch">partitioned</a>
<ul>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/searchPagination.ts">Global search examples</a></li>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/partitionSearchPagination.ts">Partitioned search examples</a></li>
</ul>
</li>
<li>Query a MapReduce view <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postview">global</a>
and <a href="https://cloud.ibm.com/apidocs/cloudant?code=node#postpartitionview">partitioned</a>
<ul>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/viewPagination.ts">Global view examples</a></li>
<li><a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/test/examples/src/features/pagination/ts/partitionViewPagination.ts">Partitioned view examples</a></li>
</ul>
</li>
</ul>
<p>The examples presented in this <code>README</code> are for all documents in a partition.
The links in the list are to equivalent examples for each of the other available operations.</p>
<h4 id="creating-a-pagination" class="tsd-anchor-link">Creating a pagination<a href="#creating-a-pagination" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Make a new pagination from a client
and the options for the chosen operation.
Use the <code>limit</code> option to configure the page size (default and maximum <code>200</code>).</p>
<p>Imports required for these examples:</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">CloudantV1</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">PagerType</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">Pagination</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">Pager</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">Stream</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Pagination</span><span class="hl-1">, </span><span class="hl-3">PagerType</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ibm-cloud/cloudant&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">Writable</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-3">pipeline</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:stream/promises&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="initialize-the-service" class="tsd-anchor-link">Initialize the service<a href="#initialize-the-service" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Initialize service</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">({});</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Initialize service</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">client</span><span class="hl-1"> = </span><span class="hl-3">CloudantV1</span><span class="hl-1">.</span><span class="hl-0">newInstance</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="set-the-options" class="tsd-anchor-link">Set the options<a href="#set-the-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Setup params</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">paginationParams</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">PostPartitionAllDocsParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;events&#39;</span><span class="hl-1">, </span><span class="hl-7">// Required: the database name.</span><br/><span class="hl-1">  </span><span class="hl-3">limit:</span><span class="hl-1"> </span><span class="hl-9">50</span><span class="hl-1">, </span><span class="hl-7">// Optional: limit parameter sets the page size. Default and max is 200.</span><br/><span class="hl-1">  </span><span class="hl-3">partitionKey:</span><span class="hl-1"> </span><span class="hl-2">&#39;ns1HJS13AMkK&#39;</span><span class="hl-1">, </span><span class="hl-7">// query only this partition</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Setup params</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">paginationParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">db:</span><span class="hl-1"> </span><span class="hl-2">&#39;events&#39;</span><span class="hl-1">, </span><span class="hl-7">// Required: the database name.</span><br/><span class="hl-1">  </span><span class="hl-3">limit:</span><span class="hl-1"> </span><span class="hl-9">50</span><span class="hl-1">, </span><span class="hl-7">// Optional: limit parameter sets the page size. Default and max is 200.</span><br/><span class="hl-1">  </span><span class="hl-3">partitionKey:</span><span class="hl-1"> </span><span class="hl-2">&#39;ns1HJS13AMkK&#39;</span><span class="hl-1">, </span><span class="hl-7">// query only this partition</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="create-the-pagination" class="tsd-anchor-link">Create the pagination<a href="#create-the-pagination" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Create pagination</span><br/><span class="hl-7">// pagination can be reused without side-effects as a factory for async iterables, streams or pagers</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">pagination</span><span class="hl-1">: </span><span class="hl-6">Pagination</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt; =</span><br/><span class="hl-1">  </span><span class="hl-3">Pagination</span><span class="hl-1">.</span><span class="hl-0">newPagination</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-7">// Required: the Cloudant service client instance.</span><br/><span class="hl-1">    </span><span class="hl-3">PagerType</span><span class="hl-1">.</span><span class="hl-8">POST_PARTITION_ALL_DOCS</span><span class="hl-1">, </span><span class="hl-7">// Required: Pager type</span><br/><span class="hl-1">    </span><span class="hl-3">paginationParams</span><span class="hl-1"> </span><span class="hl-7">// Required: pagination configuration params are fixed at pagination creation time</span><br/><span class="hl-1">  );</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Create pagination</span><br/><span class="hl-7">// pagination can be reused without side-effects as a factory for async iterables, streams or pagers</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">pagination</span><span class="hl-1"> = </span><span class="hl-3">Pagination</span><span class="hl-1">.</span><span class="hl-0">newPagination</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">client</span><span class="hl-1">, </span><span class="hl-7">// Required: the Cloudant service client instance.</span><br/><span class="hl-1">  </span><span class="hl-3">PagerType</span><span class="hl-1">.</span><span class="hl-8">POST_PARTITION_ALL_DOCS</span><span class="hl-1">, </span><span class="hl-7">// Required: Pager type</span><br/><span class="hl-1">  </span><span class="hl-3">paginationParams</span><span class="hl-1"> </span><span class="hl-7">// Required: pagination configuration params are fixed at pagination creation time</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<h4 id="using-pagination" class="tsd-anchor-link">Using pagination<a href="#using-pagination" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Once you have a pagination factory there are multiple options available.</p>
<ul>
<li>Stream pages</li>
<li>Stream rows</li>
<li>Iterate pages</li>
<li>Iterate rows</li>
<li>Get each page from a pager</li>
<li>Get all results from a pager</li>
</ul>
<p>All the paging styles produce equivalent results and make identical page requests.
The style of paging to choose depends on the use case requirements
in particular whether to process a page at a time or a row at a time.</p>
<p>The pagination factory is reusable and can repeatedly produce new instances
of the same or different pagination styles for the same operation options.</p>
<p>Here are examples for each paging style.</p>
<h5 id="stream-pages" class="tsd-anchor-link">Stream pages<a href="#stream-pages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>Streaming pages is ideal for lazy processing of pages
and leveraging Node.js's built-in stream utilities.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Option: stream pages</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">pageStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">ReadonlyArray</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt;&gt; =</span><br/><span class="hl-1">  </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pageStream</span><span class="hl-1">(); </span><span class="hl-7">// a new stream of the pages</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationPageStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">page</span><span class="hl-1">: </span><span class="hl-6">Array</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt;, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with page</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">pageStream</span><span class="hl-1">, </span><span class="hl-3">destinationPageStream</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Page stream is done&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Option: stream pages</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">pageStream</span><span class="hl-1"> = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pageStream</span><span class="hl-1">(); </span><span class="hl-7">// a new stream of the pages</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationPageStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">page</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with page</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">pageStream</span><span class="hl-1">, </span><span class="hl-3">destinationPageStream</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Page stream is done&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="stream-rows" class="tsd-anchor-link">Stream rows<a href="#stream-rows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>Streaming pages is ideal for lazy processing of rows
and leveraging Node.js's built-in stream utilities.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Option: stream rows</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">rowStream</span><span class="hl-1">: </span><span class="hl-6">Stream</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt; = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">rowStream</span><span class="hl-1">(); </span><span class="hl-7">// a new stream of the rows</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationRowStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">row</span><span class="hl-1">: </span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with row</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">rowStream</span><span class="hl-1">, </span><span class="hl-3">destinationRowStream</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Row stream is done&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Option: stream rows</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">rowStream</span><span class="hl-1"> = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">rowStream</span><span class="hl-1">(); </span><span class="hl-7">// a new stream of the rows</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">destinationRowStream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">objectMode:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-3">row</span><span class="hl-1">, </span><span class="hl-3">_</span><span class="hl-1">, </span><span class="hl-3">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with row</span><br/><span class="hl-1">    </span><span class="hl-0">callback</span><span class="hl-1">();</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">pipeline</span><span class="hl-1">(</span><span class="hl-3">rowStream</span><span class="hl-1">, </span><span class="hl-3">destinationRowStream</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Row stream is done&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="iterate-pages" class="tsd-anchor-link">Iterate pages<a href="#iterate-pages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>Iterating pages is ideal for using a for await...of statement to process a page at a time.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Option: iterate pages with for await...of statement</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">page</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pages</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with page</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span><br/><span class="hl-7">// Note: Alternatively to for await....of the iterator protocol functions and properties, like</span><br/><span class="hl-7">// `next()`, `done`, value`, can be used on the iterator returned from pages().</span><br/><span class="hl-7">// As `next()` returns with a Promise, use `await` or `.then()` on it.</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Option: iterate pages with for await...of statement</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">page</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pages</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with page</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span><br/><span class="hl-7">// Note: Alternatively to for await....of the iterator protocol functions and properties, like</span><br/><span class="hl-7">// `next()`, `done`, value`, can be used on the iterator returned from pages().</span><br/><span class="hl-7">// As `next()` returns with a Promise, use `await` or `.then()` on it.</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="iterate-rows" class="tsd-anchor-link">Iterate rows<a href="#iterate-rows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>Iterating rows is ideal for using a for await...of statement to process a result row at a time.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Option: iterate rows with for await...of statement</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">row</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">rows</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with row</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span><br/><span class="hl-7">// Note: Alternatively to for await....of the iterator protocol functions and properties:</span><br/><span class="hl-7">// `next()`, `done`, value`, can be also used on rows().</span><br/><span class="hl-7">// As `next(`)` returns with a Promise, make sure using `await` or `.then()` on it.</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Option: iterate rows with for await...of statement</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">row</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">rows</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with row</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span><br/><span class="hl-7">// Note: Alternatively to for await....of the iterator protocol functions and properties:</span><br/><span class="hl-7">// `next()`, `done`, value`, can be also used on rows().</span><br/><span class="hl-7">// As `next(`)` returns with a Promise, make sure using `await` or `.then()` on it.</span>
</code><button type="button">Copy</button></pre>

</details>
<h5 id="pager" class="tsd-anchor-link">Pager<a href="#pager" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>The pager style is similar to other <a href="https://github.com/IBM/ibm-cloud-sdk-common?tab=readme-ov-file#pagination">IBM Cloud SDKs</a>.
Users familiar with that style of pagination may find using them preferable
to the native language style iterators.</p>
<p>In the Cloudant SDKs these pagers are single use and traverse the complete set of pages once and only once.
After exhaustion they cannot be re-used, simply create a new one from the pagination factory if needed.</p>
<p>Pagers are only valid for one of either page at a time or getting all results.
For example, calling for the next page then calling for all results causes an error.</p>
<h6 id="get-each-page-from-a-pager" class="tsd-anchor-link">Get each page from a pager<a href="#get-each-page-from-a-pager" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h6><p>This is useful for calling to retrieve one page at a time, for example,
in a user interface with a &quot;next page&quot; interaction.</p>
<p>If calling for the next page errors, it is valid to call for the next page again
to continue paging.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Option: use pager next page</span><br/><span class="hl-7">// For retrieving one page at a time with a function call.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">pager</span><span class="hl-1">: </span><span class="hl-6">Pager</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt; = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pager</span><span class="hl-1">();</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">pager</span><span class="hl-1">.</span><span class="hl-0">hasNext</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">page</span><span class="hl-1">: </span><span class="hl-6">Array</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt; = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">pager</span><span class="hl-1">.</span><span class="hl-0">getNext</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with page</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Option: use pager next page</span><br/><span class="hl-7">// For retrieving one page at a time with a function call.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">pager</span><span class="hl-1"> = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pager</span><span class="hl-1">();</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-3">pager</span><span class="hl-1">.</span><span class="hl-0">hasNext</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">page</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">pager</span><span class="hl-1">.</span><span class="hl-0">getNext</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with page</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<h6 id="get-all-results-from-a-pager" class="tsd-anchor-link">Get all results from a pager<a href="#get-all-results-from-a-pager" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h6><p>This is useful to retrieve all results in a single call.
However, this approach requires sufficient memory for the entire collection of results.
So although it may be convenient for small result sets generally prefer iterating pages
or rows with the other paging styles, especially for large result sets.</p>
<p>If calling for all the results errors, then calling for all the results again restarts the pagination.</p>
<details open>
<summary>TypeScript:</summary>
<pre><code class="ts"><span class="hl-7">// Option: use pager all results</span><br/><span class="hl-7">// For retrieving all result rows in a single list</span><br/><span class="hl-7">// Note: all result rows may be very large!</span><br/><span class="hl-7">// Preferably use streams/iterables instead of getAll for memory efficiency with large result sets.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">allPager</span><span class="hl-1">: </span><span class="hl-6">Pager</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt; = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pager</span><span class="hl-1">();</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">allRows</span><span class="hl-1">: </span><span class="hl-6">Array</span><span class="hl-1">&lt;</span><span class="hl-6">CloudantV1</span><span class="hl-1">.</span><span class="hl-6">DocsResultRow</span><span class="hl-1">&gt; = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">allPager</span><span class="hl-1">.</span><span class="hl-0">getAll</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">row</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">allRows</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with row</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>JavaScript:</summary>
<pre><code class="js"><span class="hl-7">// Option: use pager all results</span><br/><span class="hl-7">// For retrieving all result rows in a single list</span><br/><span class="hl-7">// Note: all result rows may be very large!</span><br/><span class="hl-7">// Preferably use streams/iterables instead of getAll for memory efficiency with large result sets.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">allPager</span><span class="hl-1"> = </span><span class="hl-3">pagination</span><span class="hl-1">.</span><span class="hl-0">pager</span><span class="hl-1">();</span><br/><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">allRows</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">allPager</span><span class="hl-1">.</span><span class="hl-0">getAll</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">row</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">allRows</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Do something with row</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</details>
<h2 id="questions" class="tsd-anchor-link">Questions<a href="#questions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you are having difficulties using this SDK or have a question about the
IBM Cloud services, ask a question on
<a href="http://stackoverflow.com/questions/ask?tags=ibm-cloud">Stack Overflow</a>.</p>
<h2 id="issues" class="tsd-anchor-link">Issues<a href="#issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you encounter an issue with the project, you are welcome to submit a
<a href="https://github.com/IBM/cloudant-node-sdk/issues">bug report</a>.</p>
<p>Before you submit a bug report, search for
<a href="https://github.com/IBM/cloudant-node-sdk/issues?q=is%3Aissue">similar issues</a> and review the
<a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/KNOWN_ISSUES.md">KNOWN_ISSUES file</a> to verify that your issue hasn't been reported yet.</p>
<p>Please consult the <a href="https://github.com/IBM/cloudant-node-sdk/security/policy">security policy</a> before opening security related issues.</p>
<h2 id="versioning-and-lts-support" class="tsd-anchor-link">Versioning and LTS support<a href="#versioning-and-lts-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This SDK follows semantic versioning with respect to the definition of user facing APIs.
This means under some circumstances breaking changes may occur within a major or minor version
of the SDK related to changes in supported language platforms.</p>
<p>The SDK is supported on the available LTS releases of the language platform.
The LTS language versions are listed in the prerequisites:</p>
<ul>
<li><a href="https://github.com/IBM/cloudant-node-sdk/#prerequisites">LTS versions currently supported by the SDK</a></li>
<li><a href="#prerequisites">LTS versions for this release of the SDK</a></li>
</ul>
<p>Incompatible changes from new language versions are not added to the SDK
until they are available in the minimum supported language version.</p>
<p>When language LTS versions move out of support the following will happen:</p>
<ul>
<li>Existing SDK releases will continue to run on obsolete language versions, but will no longer be supported.</li>
<li>The minimum language version supported by the SDK will be updated to the next available LTS.</li>
<li>New language features may be added in subsequent SDK releases that will cause breaking changes
if the new releases of the SDK are used with older, now unsupported, language levels.</li>
</ul>
<h2 id="open-source-at-ibm" class="tsd-anchor-link">Open source at IBM<a href="#open-source-at-ibm" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Find more open source projects on the <a href="http://ibm.github.io/">IBM GitHub</a> page.</p>
<h2 id="contributing" class="tsd-anchor-link">Contributing<a href="#contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For more information, see <a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/CONTRIBUTING.md">CONTRIBUTING</a>.</p>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This SDK is released under the Apache 2.0 license. To read the full text of the license, see <a href="https://github.com/IBM/cloudant-node-sdk/tree/v0.12.5/LICENSE">LICENSE</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ibm-cloudant-nodejs-sdk-version-0125"><span>IBM <wbr/>Cloudant <wbr/>Node.js <wbr/>SDK <wbr/>Version 0.12.5</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#features"><span>Features</span></a></li><li><a href="#prerequisites"><span>Prerequisites</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#using-the-sdk"><span>Using the <wbr/>SDK</span></a></li><li><ul><li><a href="#authentication"><span>Authentication</span></a></li><li><ul><li><a href="#authentication-with-environment-variables"><span>Authentication with environment variables</span></a></li><li><ul><li><a href="#iam-api-key-authentication"><span>IAM <wbr/>API key authentication</span></a></li><li><a href="#iam-trusted-profile-container-authentication"><span>IAM <wbr/>Trusted profile (container) authentication</span></a></li><li><a href="#iam-trusted-profile-vpc-authentication"><span>IAM <wbr/>Trusted profile (<wbr/>VPC) authentication</span></a></li><li><a href="#iam-trusted-profile-assume-identity-authentication"><span>IAM <wbr/>Trusted profile (assume identity) authentication</span></a></li><li><a href="#session-cookie-authentication"><span>Session cookie authentication</span></a></li></ul></li><li><a href="#authentication-with-external-configuration"><span>Authentication with external configuration</span></a></li><li><a href="#programmatic-authentication"><span>Programmatic authentication</span></a></li></ul></li><li><a href="#automatic-retries"><span>Automatic retries</span></a></li><li><a href="#request-timeout-configuration"><span>Request timeout configuration</span></a></li><li><a href="#code-examples"><span>Code examples</span></a></li><li><ul><li><a href="#1-create-a-database-and-add-a-document"><span>1. <wbr/>Create a database and add a document</span></a></li><li><a href="#2-retrieve-information-from-an-existing-database"><span>2. <wbr/>Retrieve information from an existing database</span></a></li><li><a href="#3-update-your-previously-created-document"><span>3. <wbr/>Update your previously created document</span></a></li><li><a href="#4-delete-your-previously-created-document"><span>4. <wbr/>Delete your previously created document</span></a></li><li><a href="#further-code-examples"><span>Further code examples</span></a></li></ul></li><li><a href="#error-handling"><span>Error handling</span></a></li><li><a href="#raw-io"><span>Raw <wbr/>IO</span></a></li><li><a href="#further-resources"><span>Further resources</span></a></li><li><a href="#browser-usage"><span>Browser usage</span></a></li><li><ul><li><a href="#polyfills"><span>Polyfills</span></a></li><li><a href="#cors"><span>CORS</span></a></li></ul></li><li><a href="#changes-feed-follower"><span>Changes feed follower</span></a></li><li><ul><li><a href="#introduction"><span>Introduction</span></a></li><li><a href="#modes-of-operation"><span>Modes of operation</span></a></li><li><a href="#configuring-the-changes-follower"><span>Configuring the changes follower</span></a></li><li><a href="#error-suppression"><span>Error suppression</span></a></li><li><a href="#follower-operation"><span>Follower operation</span></a></li><li><a href="#checkpoints"><span>Checkpoints</span></a></li><li><a href="#code-examples-1"><span>Code examples</span></a></li><li><ul><li><a href="#initializing-a-changes-follower"><span>Initializing a changes follower</span></a></li><li><a href="#starting-the-changes-follower"><span>Starting the changes follower</span></a></li><li><ul><li><a href="#start-mode-for-continuous-listening"><span>Start mode for continuous listening</span></a></li><li><a href="#start-mode-for-one-off-fetching"><span>Start mode for one-<wbr/>off fetching</span></a></li></ul></li><li><a href="#processing-changes"><span>Processing changes</span></a></li><li><ul><li><a href="#process-continuous-changes"><span>Process continuous changes</span></a></li><li><a href="#process-one-off-changes"><span>Process one-<wbr/>off changes</span></a></li></ul></li><li><a href="#stopping-the-changes-follower"><span>Stopping the changes follower</span></a></li></ul></li></ul></li><li><a href="#pagination-beta"><span>Pagination (beta)</span></a></li><li><ul><li><a href="#introduction-1"><span>Introduction</span></a></li><li><a href="#limitations"><span>Limitations</span></a></li><li><a href="#capacity-considerations"><span>Capacity considerations</span></a></li><li><a href="#available-operations"><span>Available operations</span></a></li><li><a href="#creating-a-pagination"><span>Creating a pagination</span></a></li><li><ul><li><a href="#initialize-the-service"><span>Initialize the service</span></a></li><li><a href="#set-the-options"><span>Set the options</span></a></li><li><a href="#create-the-pagination"><span>Create the pagination</span></a></li></ul></li><li><a href="#using-pagination"><span>Using pagination</span></a></li><li><ul><li><a href="#stream-pages"><span>Stream pages</span></a></li><li><a href="#stream-rows"><span>Stream rows</span></a></li><li><a href="#iterate-pages"><span>Iterate pages</span></a></li><li><a href="#iterate-rows"><span>Iterate rows</span></a></li><li><a href="#pager"><span>Pager</span></a></li><li><ul><li><a href="#get-each-page-from-a-pager"><span>Get each page from a pager</span></a></li><li><a href="#get-all-results-from-a-pager"><span>Get all results from a pager</span></a></li></ul></li></ul></li></ul></li></ul></li><li><a href="#questions"><span>Questions</span></a></li><li><a href="#issues"><span>Issues</span></a></li><li><a href="#versioning-and-lts-support"><span>Versioning and <wbr/>LTS support</span></a></li><li><a href="#open-source-at-ibm"><span>Open source at <wbr/>IBM</span></a></li><li><a href="#contributing"><span>Contributing</span></a></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@ibm-cloud/cloudant - v0.12.5</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
